<div class="form-group">
  <div class="row">
    <%= label_tag :ink_colors, 'Ink colors', class: 'col-sm-2 control-label' %>
    <div class="col-sm-10">
      <% ink_colors = local_assigns[:imprints] ? InkColor.compatible_with(imprints.flat_map(&:imprint_method)) : local_assigns[:ink_colors] %>
      <% if ink_colors.blank? || ink_colors.empty? %>
        The selected imprints share no compatible ink colors.
      <% else %>
        <% (ink_colors || []).each do |ink_color| %>
          <% checked =
                     if artwork_request && artwork_request.ink_color_ids.include?(ink_color.id)
                       { checked: true }
                     else
                       false
                     end
          %>

          <%= check_box_tag 'artwork_request[ink_color_ids][]', ink_color.id, checked %>

          <%= ink_color.name %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
