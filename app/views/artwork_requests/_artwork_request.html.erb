<div id="artwork-request-<%= artwork_request.id %>" class="row">
  <div class="the-notes info artwork-request-notes">
    <% unless artwork_request.artwork_ids.empty? %>
      <%= render 'artwork_requests/artworks', artwork_request: artwork_request %>
    <% end %>
    
    <br clear="all" />
    <div class="row">
      <h4 class="artwork-request-title">Artwork Request for <%= artwork_request.jobs.map(&:name).join(', ') %>
      </h4>

      <% if artwork_request.reorder? %>
        <div class="alert alert-warning">
          This artwork request is for an exact reorder.
          <ul>
            <li>Description
            </li>
            <li><%= artwork_request.description %>
            </li>
          </ul>
          <br clear="all" />
        </div>
      <% end %>
    </div>

    <div class="row">
      <%= render 'artwork_requests/show/basic_details', { artwork_request: artwork_request, full: true} %>
    </div>

    <div class="row">
      <%= render 'artwork_requests/show/artist_job_and_style_table', {artwork_request: artwork_request} %>
    </div>

    <div class="row artwork-request-actions">
      <dl>
        <dt>Description:
        </dt><br />
        <dd><%= artwork_request.description.html_safe %>
        </dd>
        <br />
        <dt>Attachments:
        </dt>
        <% if artwork_request.assets.empty? %>
          <dd>None</dd>
        <% end %>
      </dl>
      <% artwork_request.assets.each do |asset| %>
        <div class="col-sm-5 indent">
          <dl>
            <dt>File Name:
            </dt>
            <dd><%= asset.file_file_name %>
            </dd>
            <dt>File Size:
            </dt>
            <dd><%= number_to_human_size(asset.file_file_size) %>
            </dd>
            <dt>Description:
            </dt>
            <dd><%= asset.description %>
            </dd>
            <dd><%= link_to 'Download File', asset.file.url %>
            </dd>
          </dl>
        </div>
      <% end %>
    </div><!-- end of .artwork-request-actions  -->

    <div class="row">
      <div class="col-sm-12">
        <%= link_to edit_order_artwork_request_path(order, artwork_request), class: 'btn btn-primary' do %>
          <i class="glyphicon glyphicon-pencil"></i> Edit
        <% end %>
        
        <% if params[:disable_buttons].nil? %>
          <%= link_to artworks_path(artwork_request_id: artwork_request.id), remote: true, class: 'btn btn-success' do %>
            <i class="glyphicon glyphicon-plus-sign"></i> Add Artwork
          <% end %>
        <% end %>

        <% if artwork_request.state == 'pending_manager_approval' %>
          <%= link_to order_artwork_request_path(artwork_request.order, artwork_request, artwork_request: { state: 'manager_approved'} ), 
            method: :put, class: 'btn btn-success', data: {action: :update, toggle: :tooltip,
            title: 'Approve',  confirm: "Confirm Manager Approval" } do %>
          <i class="glyphicon glyphicon-thumbs-up"></i> Approve
          <% end %>
        <% end %>

        <% if artwork_request.state == 'pending_manager_approval' || artwork_request.state == 'manager_approved' %>
          <%= link_to order_artwork_request_path(artwork_request.order, artwork_request, artwork_request: { state: 'pending_artwork' }), 
            method: :put, method: :put, class: 'btn btn-danger',  data: {action: :update, toggle: :tooltip,
            title: 'Reject Artwork',  confirm: "Confirm Rejection" } do %>
            <i class="glyphicon glyphicon-thumbs-down"></i> Reject Artwork
          <% end %>
        <% end %>

        <% unless artwork_request.state == "approved" %>
          <%= link_to order_artwork_request_path(artwork_request.order, artwork_request, artwork_request: { state: 'reject_request'} ), 
            method: :put, class: 'btn btn-warning', data: {action: :update, toggle: :tooltip,
            title: 'Reject Artwork Request',  confirm: "Confirm Manager Approval" } do %>
          <i class="glyphicon glyphicon-thumbs-down"></i> Reject Artwork Request
          <% end %>
        <% end %>

        <%= link_to order_artwork_request_path(order, artwork_request), class: 'btn btn-danger',
             method: :delete, remote: true do %>
          <i class="glyphicon glyphicon-remove-circle"></i> Delete
        <% end %>

      </div><!-- end of col-sm-12 -->
    </div><!-- end of row -->

  </div><!-- END OF THE ARTWORK REQUEST -->
</div><!-- END OF THE NOTES -->

