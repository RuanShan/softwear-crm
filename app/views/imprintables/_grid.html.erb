<!-- we'll probably have to move this to a stylesheet -->
<style type="text/css">
  .fa-plus {
    position:absolute;
    bottom:5px;
    right:15px;
    text-align:left;
    vertical-align:bottom;
    cursor:pointer;
    color:green;
  }
  .fa-minus{
    position:absolute;
    bottom:5px;
    left:15px;
    cursor:pointer;
    color:red;
  }
  .fa-check{
    color:green;
    position:absolute;
  }
  .fa-times{
    color:red;
    position:absolute;
  }
  .table-hover th {
    border:1px solid #CCCCCC;
    text-align:center;
    vertical-align:middle;
    position:relative;
  }
  .table-hover td {
    border:1px solid #CCCCCC;
    text-align:center;
    vertical-align:middle;
    position:relative;
  }
  .table-hover {
    border:1px solid #CCCCCC;
    position:relative;
  }
  #add_a_color {
    cursor:pointer;
  }
  #add_a_size {
    cursor:pointer;
  }
  .button {
    padding:5px;
    position: relative;
    vertical-align: center;
    background-color: #DCDCDC;
    border: 1px solid #666;
    color:#000;
    cursor: pointer;
    text-decoration:none;
  }
</style>

<div class="table-responsive">
  <table class="table table-hover" id="imprintable_variants_list">
    <thead>
    <tr>
      <th></th>

      <% @sizes.each do |size| %>
        <th>
          <%= size.name %>
          <i class="fa fa-plus" id="col_plus_<%=size.id%>"></i>
          <i class="fa fa-minus" id="col_minus_<%=size.id%>"></i>
        </th>
      <% end %>
      <th id="add_a_size">
        <%= select_tag nil,
                       options_for_select(['Select a Size'] + Size.order(:sort_order).collect{ |s| [s.name, s.id] }),
                       {
                           class: 'form-control',
                           id: 'size_select'
                       } %>
      </th>
    </tr>
    </thead>
    <tbody>
    <% puts '===================================================' %>
    <% @colors.each do |color| %>
      <% puts color %>
    <% end %>
    <% variants = imprintable.find_variants %>
    <% @colors.each do |color| %>
      <tr id="<%= model_table_row_id color %>">
        <th>
          <%= color.name %>
          <i class="fa fa-plus" id="row_plus_<%=color.id%>"></i>
          <i class="fa fa-minus" id="row_minus_<%=color.id%>"></i>
        </th>
        <% @sizes.each do |size| %>
          <td id="cell">
          <% if variants.find { |v| (v.color_id == color.id) && (v.size_id == size.id) } %>
            <i class="fa fa-check" id="cell_<%=color.id%>_<%=size.id%>"></i>
          <% else %>
            <i class="fa fa-times" id="cell_<%=color.id%>_<%=size.id%>"></i>
          <% end %>
            <i class="fa fa-plus cell"></i>
            <i class="fa fa-minus cell"></i>
          </td>
        <% end %>
      </tr>
    <% end %>
    <%= content_tag 'div', id: 'color_and_style', data: { colors: colors, sizes: sizes } do %>
    <% end %>
    <tr>
      <th id="add_a_color">
      <%= select_tag nil,
                     options_for_select(['Select a Color'] + Color.order(:name).collect{ |c| [c.name, c.id] }),
                     {
                         class: 'form-control',
                         id: 'color_select'
                     } %>
      </th>
      <% if @sizes.empty? || @colors.empty? %>
        <td><a class="button" id="select_button">Select</a></td>
      <% end %>
    </tr>
    </tbody>
  </table>
</div>
