<div class='form-group'>
  <%= f.hidden_field :applicator_type, value: 'Refund' %>

  <div class="form-group">
    <%= f.label :discount_method, 'Refund Method' %>
    <%= f.select :discount_method, options_for_select(Discount::PAYMENT_METHODS, @discount.discount_method || 'RefundPayment'), {} %>
  </div>

  <div class="form-group refund-discountable-type">
    <%= f.label :discountable_type, 'Apply to' %>
    <%= f.select :discountable_type,
      options_for_select(
        [['This order', 'Order'], ['A job', 'Job'], ['A payment', 'Payment']],
        @discount.discountable_type
      ),
      include_blank: true
    %>
  </div>

  <div class="form-group refund-job-select" style="display: none;">
    <%= f.label :discountable_id, 'Job' %>
    <%= f.select :discountable_id, options_from_collection_for_select(@order.jobs, :id, :name) %>
  </div>
  <div class="form-group refund-payment-select" style<%= '="display: none;"' unless @discount.discountable_type == 'Payment' %>>
    <%= f.label :discountable_id, 'Payment' %>
    <%= f.select :discountable_id, options_with_data_attr(@order.payments.where.not(cc_transaction: nil), :id, :identifier, { transaction: :cc_transaction }) %>
  </div>

  <div class="form-group">
    <%= f.label :amount %>

    <div class="input-group">
      <span class="input-group-addon">$</span>
      <%= f.text_field :amount %>
    </div>
  </div>

  <div class="form-group">
    <%= f.label :reason %>
    <%= f.text_area :reason %>
  </div>

  <div class="form-group">
    <%= f.label :transaction_id, 'Transaction ID' %>
    <%= f.text_area :transaction_id %>
  </div>
</div>
